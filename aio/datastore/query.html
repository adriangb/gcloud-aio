<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>gcloud.aio.datastore.query API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>gcloud.aio.datastore.query</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">from typing import Any
from typing import Dict
from typing import List
from typing import Optional

from gcloud.aio.datastore.constants import MoreResultsType
from gcloud.aio.datastore.constants import ResultType
from gcloud.aio.datastore.entity import EntityResult
from gcloud.aio.datastore.filter import Filter
from gcloud.aio.datastore.projection import Projection
from gcloud.aio.datastore.property_order import PropertyOrder
from gcloud.aio.datastore.value import Value


class BaseQuery:
    json_key: str
    value_kind = Value

    def __repr__(self) -&gt; str:
        return str(self.to_repr())

    @classmethod
    def from_repr(cls, data: Dict[str, Any]) -&gt; &#39;BaseQuery&#39;:
        raise NotImplementedError

    def to_repr(self) -&gt; Dict[str, Any]:
        raise NotImplementedError


# https://cloud.google.com/datastore/docs/reference/data/rest/v1/projects/runQuery#Query
class Query(BaseQuery):
    # pylint: disable=too-many-instance-attributes
    json_key = &#39;query&#39;

    def __init__(self, kind: str = &#39;&#39;, query_filter: Optional[Filter] = None,
                 order: Optional[List[PropertyOrder]] = None,
                 start_cursor: str = &#39;&#39;, end_cursor: str = &#39;&#39;,
                 offset: Optional[int] = None, limit: Optional[int] = None,
                 projection: Optional[List[Projection]] = None,
                 distinct_on: Optional[List[str]] = None) -&gt; None:
        self.kind = kind
        self.query_filter = query_filter
        self.orders = order or []
        self.start_cursor = start_cursor
        self.end_cursor = end_cursor
        self.offset = offset
        self.limit = limit
        self.projection = projection or []
        self.distinct_on = distinct_on or []

    def __eq__(self, other: Any) -&gt; bool:
        if not isinstance(other, Query):
            return False

        return bool(
            self.kind == other.kind
            and self.query_filter == other.query_filter)

    @classmethod
    def from_repr(cls, data: Dict[str, Any]) -&gt; &#39;Query&#39;:
        kind = data[&#39;kind&#39;] or &#39;&#39;  # Kind is required
        if not isinstance(kind, str):
            # If &#39;kind&#39; is not a str, then the only other acceptable format
            # is the list of a single dict [{&#39;name&#39; : kind}] (see to_repr)
            kind = kind[0].get(&#39;name&#39;) or &#39;&#39;
        orders = [PropertyOrder.from_repr(o) for o in data.get(&#39;order&#39;, [])]
        start_cursor = data.get(&#39;startCursor&#39;) or &#39;&#39;
        end_cursor = data.get(&#39;endCursor&#39;) or &#39;&#39;
        offset = int(data[&#39;offset&#39;]) if &#39;offset&#39; in data else None
        limit = int(data[&#39;limit&#39;]) if &#39;limit&#39; in data else None
        projection = [Projection.from_repr(p)
                      for p in data.get(&#39;projection&#39;, [])]
        distinct_on = [d[&#39;name&#39;] for d in data.get(&#39;distinct_on&#39;, [])]

        filter_ = data.get(&#39;filter&#39;)
        query_filter = Filter.from_repr(filter_) if filter_ else None

        return cls(kind=kind, query_filter=query_filter, order=orders,
                   start_cursor=start_cursor, end_cursor=end_cursor,
                   offset=offset, limit=limit,
                   projection=projection, distinct_on=distinct_on)

    def to_repr(self) -&gt; Dict[str, Any]:
        data: Dict[str, Any] = {
            &#39;kind&#39;: [{&#39;name&#39;: self.kind}] if self.kind else [],
        }
        if self.query_filter:
            data[&#39;filter&#39;] = self.query_filter.to_repr()
        if self.orders:
            data[&#39;order&#39;] = [o.to_repr() for o in self.orders]
        if self.start_cursor:
            data[&#39;startCursor&#39;] = self.start_cursor
        if self.end_cursor:
            data[&#39;endCursor&#39;] = self.end_cursor
        if self.offset is not None:
            data[&#39;offset&#39;] = self.offset
        if self.limit is not None:
            data[&#39;limit&#39;] = self.limit
        if self.projection:
            data[&#39;projection&#39;] = [p.to_repr() for p in self.projection]
        if self.distinct_on:
            data[&#39;distinctOn&#39;] = [{&#39;name&#39;: d} for d in self.distinct_on]
        return data


# https://cloud.google.com/datastore/docs/reference/data/rest/v1/projects/runQuery#gqlquery
class GQLQuery(BaseQuery):
    json_key = &#39;gqlQuery&#39;

    def __init__(self, query_string: str, allow_literals: bool = True,
                 named_bindings: Optional[Dict[str, Any]] = None,
                 positional_bindings: Optional[List[Any]] = None) -&gt; None:
        self.query_string = query_string
        self.allow_literals = allow_literals
        self.named_bindings = named_bindings or {}
        self.positional_bindings = positional_bindings or []

    def __eq__(self, other: Any) -&gt; bool:
        if not isinstance(other, GQLQuery):
            return False

        return bool(
            self.query_string == other.query_string
            and self.allow_literals == other.allow_literals
            and self.named_bindings == other.named_bindings
            and self.positional_bindings == other.positional_bindings)

    @classmethod
    def from_repr(cls, data: Dict[str, Any]) -&gt; &#39;GQLQuery&#39;:
        allow_literals = data[&#39;allowLiterals&#39;]
        query_string = data[&#39;queryString&#39;]
        named_bindings = {k: cls._param_from_repr(v)
                          for k, v in data.get(&#39;namedBindings&#39;, {}).items()}
        positional_bindings = [cls._param_from_repr(v)
                               for v in data.get(&#39;positionalBindings&#39;, [])]
        return cls(query_string, allow_literals=allow_literals,
                   named_bindings=named_bindings,
                   positional_bindings=positional_bindings)

    @classmethod
    def _param_from_repr(cls, param_repr: Dict[str, Any]) -&gt; Any:
        if &#39;cursor&#39; in param_repr:
            return GQLCursor(param_repr[&#39;cursor&#39;])

        return cls.value_kind.from_repr(param_repr[&#39;value&#39;]).value

    def to_repr(self) -&gt; Dict[str, Any]:
        return {
            &#39;allowLiterals&#39;: self.allow_literals,
            &#39;queryString&#39;: self.query_string,
            &#39;namedBindings&#39;: {k: self._param_to_repr(v)
                              for k, v in self.named_bindings.items()},
            &#39;positionalBindings&#39;: [self._param_to_repr(v)
                                   for v in self.positional_bindings],
        }

    def _param_to_repr(self, param: Any) -&gt; Dict[str, Any]:
        if isinstance(param, GQLCursor):
            return {&#39;cursor&#39;: param.value}

        return {&#39;value&#39;: self.value_kind(param).to_repr()}


class GQLCursor:

    def __init__(self, value: str):
        self.value = value

    def __eq__(self, other: Any) -&gt; bool:
        return isinstance(other, GQLCursor) and self.value == other.value


class QueryResultBatch:
    entity_result_kind = EntityResult

    def __init__(self, end_cursor: str,
                 entity_result_type: ResultType = ResultType.UNSPECIFIED,
                 entity_results: Optional[List[EntityResult]] = None,
                 more_results: MoreResultsType = MoreResultsType.UNSPECIFIED,
                 skipped_cursor: str = &#39;&#39;, skipped_results: int = 0,
                 snapshot_version: str = &#39;&#39;) -&gt; None:
        self.end_cursor = end_cursor

        self.entity_result_type = entity_result_type
        self.entity_results = entity_results or []
        self.more_results = more_results
        self.skipped_cursor = skipped_cursor
        self.skipped_results = skipped_results
        self.snapshot_version = snapshot_version

    def __eq__(self, other: Any) -&gt; bool:
        if not isinstance(other, QueryResultBatch):
            return False

        return bool(self.end_cursor == other.end_cursor
                    and self.entity_result_type == other.entity_result_type
                    and self.entity_results == other.entity_results
                    and self.more_results == other.more_results
                    and self.skipped_cursor == other.skipped_cursor
                    and self.skipped_results == other.skipped_results
                    and self.snapshot_version == other.snapshot_version)

    def __repr__(self) -&gt; str:
        return str(self.to_repr())

    @classmethod
    def from_repr(cls, data: Dict[str, Any]) -&gt; &#39;QueryResultBatch&#39;:
        end_cursor = data[&#39;endCursor&#39;]
        entity_result_type = ResultType(data[&#39;entityResultType&#39;])
        entity_results = [cls.entity_result_kind.from_repr(er)
                          for er in data.get(&#39;entityResults&#39;, [])]
        more_results = MoreResultsType(data[&#39;moreResults&#39;])
        skipped_cursor = data.get(&#39;skippedCursor&#39;, &#39;&#39;)
        skipped_results = data.get(&#39;skippedResults&#39;, 0)
        snapshot_version = data.get(&#39;snapshotVersion&#39;, &#39;&#39;)
        return cls(end_cursor, entity_result_type=entity_result_type,
                   entity_results=entity_results, more_results=more_results,
                   skipped_cursor=skipped_cursor,
                   skipped_results=skipped_results,
                   snapshot_version=snapshot_version)

    def to_repr(self) -&gt; Dict[str, Any]:
        data = {
            &#39;endCursor&#39;: self.end_cursor,
            &#39;entityResults&#39;: [er.to_repr() for er in self.entity_results],
            &#39;entityResultType&#39;: self.entity_result_type.value,
            &#39;moreResults&#39;: self.more_results.value,
            &#39;skippedResults&#39;: self.skipped_results,
        }
        if self.skipped_cursor:
            data[&#39;skippedCursor&#39;] = self.skipped_cursor
        if self.snapshot_version:
            data[&#39;snapshotVersion&#39;] = self.snapshot_version

        return data</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="gcloud.aio.datastore.query.BaseQuery"><code class="flex name class">
<span>class <span class="ident">BaseQuery</span></span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class BaseQuery:
    json_key: str
    value_kind = Value

    def __repr__(self) -&gt; str:
        return str(self.to_repr())

    @classmethod
    def from_repr(cls, data: Dict[str, Any]) -&gt; &#39;BaseQuery&#39;:
        raise NotImplementedError

    def to_repr(self) -&gt; Dict[str, Any]:
        raise NotImplementedError</code></pre>
</details>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="gcloud.aio.datastore.query.GQLQuery" href="#gcloud.aio.datastore.query.GQLQuery">GQLQuery</a></li>
<li><a title="gcloud.aio.datastore.query.Query" href="#gcloud.aio.datastore.query.Query">Query</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="gcloud.aio.datastore.query.BaseQuery.json_key"><code class="name">var <span class="ident">json_key</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="gcloud.aio.datastore.query.BaseQuery.value_kind"><code class="name">var <span class="ident">value_kind</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Static methods</h3>
<dl>
<dt id="gcloud.aio.datastore.query.BaseQuery.from_repr"><code class="name flex">
<span>def <span class="ident">from_repr</span></span>(<span>data: Dict[str, Any]) ‑> <a title="gcloud.aio.datastore.query.BaseQuery" href="#gcloud.aio.datastore.query.BaseQuery">BaseQuery</a></span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@classmethod
def from_repr(cls, data: Dict[str, Any]) -&gt; &#39;BaseQuery&#39;:
    raise NotImplementedError</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="gcloud.aio.datastore.query.BaseQuery.to_repr"><code class="name flex">
<span>def <span class="ident">to_repr</span></span>(<span>self) ‑> Dict[str, Any]</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def to_repr(self) -&gt; Dict[str, Any]:
    raise NotImplementedError</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="gcloud.aio.datastore.query.GQLCursor"><code class="flex name class">
<span>class <span class="ident">GQLCursor</span></span>
<span>(</span><span>value: str)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class GQLCursor:

    def __init__(self, value: str):
        self.value = value

    def __eq__(self, other: Any) -&gt; bool:
        return isinstance(other, GQLCursor) and self.value == other.value</code></pre>
</details>
</dd>
<dt id="gcloud.aio.datastore.query.GQLQuery"><code class="flex name class">
<span>class <span class="ident">GQLQuery</span></span>
<span>(</span><span>query_string: str, allow_literals: bool = True, named_bindings: Optional[Dict[str, Any]] = None, positional_bindings: Optional[List[Any]] = None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class GQLQuery(BaseQuery):
    json_key = &#39;gqlQuery&#39;

    def __init__(self, query_string: str, allow_literals: bool = True,
                 named_bindings: Optional[Dict[str, Any]] = None,
                 positional_bindings: Optional[List[Any]] = None) -&gt; None:
        self.query_string = query_string
        self.allow_literals = allow_literals
        self.named_bindings = named_bindings or {}
        self.positional_bindings = positional_bindings or []

    def __eq__(self, other: Any) -&gt; bool:
        if not isinstance(other, GQLQuery):
            return False

        return bool(
            self.query_string == other.query_string
            and self.allow_literals == other.allow_literals
            and self.named_bindings == other.named_bindings
            and self.positional_bindings == other.positional_bindings)

    @classmethod
    def from_repr(cls, data: Dict[str, Any]) -&gt; &#39;GQLQuery&#39;:
        allow_literals = data[&#39;allowLiterals&#39;]
        query_string = data[&#39;queryString&#39;]
        named_bindings = {k: cls._param_from_repr(v)
                          for k, v in data.get(&#39;namedBindings&#39;, {}).items()}
        positional_bindings = [cls._param_from_repr(v)
                               for v in data.get(&#39;positionalBindings&#39;, [])]
        return cls(query_string, allow_literals=allow_literals,
                   named_bindings=named_bindings,
                   positional_bindings=positional_bindings)

    @classmethod
    def _param_from_repr(cls, param_repr: Dict[str, Any]) -&gt; Any:
        if &#39;cursor&#39; in param_repr:
            return GQLCursor(param_repr[&#39;cursor&#39;])

        return cls.value_kind.from_repr(param_repr[&#39;value&#39;]).value

    def to_repr(self) -&gt; Dict[str, Any]:
        return {
            &#39;allowLiterals&#39;: self.allow_literals,
            &#39;queryString&#39;: self.query_string,
            &#39;namedBindings&#39;: {k: self._param_to_repr(v)
                              for k, v in self.named_bindings.items()},
            &#39;positionalBindings&#39;: [self._param_to_repr(v)
                                   for v in self.positional_bindings],
        }

    def _param_to_repr(self, param: Any) -&gt; Dict[str, Any]:
        if isinstance(param, GQLCursor):
            return {&#39;cursor&#39;: param.value}

        return {&#39;value&#39;: self.value_kind(param).to_repr()}</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="gcloud.aio.datastore.query.BaseQuery" href="#gcloud.aio.datastore.query.BaseQuery">BaseQuery</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="gcloud.aio.datastore.query.GQLQuery.json_key"><code class="name">var <span class="ident">json_key</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Static methods</h3>
<dl>
<dt id="gcloud.aio.datastore.query.GQLQuery.from_repr"><code class="name flex">
<span>def <span class="ident">from_repr</span></span>(<span>data: Dict[str, Any]) ‑> <a title="gcloud.aio.datastore.query.GQLQuery" href="#gcloud.aio.datastore.query.GQLQuery">GQLQuery</a></span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@classmethod
def from_repr(cls, data: Dict[str, Any]) -&gt; &#39;GQLQuery&#39;:
    allow_literals = data[&#39;allowLiterals&#39;]
    query_string = data[&#39;queryString&#39;]
    named_bindings = {k: cls._param_from_repr(v)
                      for k, v in data.get(&#39;namedBindings&#39;, {}).items()}
    positional_bindings = [cls._param_from_repr(v)
                           for v in data.get(&#39;positionalBindings&#39;, [])]
    return cls(query_string, allow_literals=allow_literals,
               named_bindings=named_bindings,
               positional_bindings=positional_bindings)</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="gcloud.aio.datastore.query.GQLQuery.to_repr"><code class="name flex">
<span>def <span class="ident">to_repr</span></span>(<span>self) ‑> Dict[str, Any]</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def to_repr(self) -&gt; Dict[str, Any]:
    return {
        &#39;allowLiterals&#39;: self.allow_literals,
        &#39;queryString&#39;: self.query_string,
        &#39;namedBindings&#39;: {k: self._param_to_repr(v)
                          for k, v in self.named_bindings.items()},
        &#39;positionalBindings&#39;: [self._param_to_repr(v)
                               for v in self.positional_bindings],
    }</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="gcloud.aio.datastore.query.Query"><code class="flex name class">
<span>class <span class="ident">Query</span></span>
<span>(</span><span>kind: str = '', query_filter: Optional[<a title="gcloud.aio.datastore.filter.Filter" href="filter.html#gcloud.aio.datastore.filter.Filter">Filter</a>] = None, order: Optional[List[<a title="gcloud.aio.datastore.property_order.PropertyOrder" href="property_order.html#gcloud.aio.datastore.property_order.PropertyOrder">PropertyOrder</a>]] = None, start_cursor: str = '', end_cursor: str = '', offset: Optional[int] = None, limit: Optional[int] = None, projection: Optional[List[<a title="gcloud.aio.datastore.projection.Projection" href="projection.html#gcloud.aio.datastore.projection.Projection">Projection</a>]] = None, distinct_on: Optional[List[str]] = None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Query(BaseQuery):
    # pylint: disable=too-many-instance-attributes
    json_key = &#39;query&#39;

    def __init__(self, kind: str = &#39;&#39;, query_filter: Optional[Filter] = None,
                 order: Optional[List[PropertyOrder]] = None,
                 start_cursor: str = &#39;&#39;, end_cursor: str = &#39;&#39;,
                 offset: Optional[int] = None, limit: Optional[int] = None,
                 projection: Optional[List[Projection]] = None,
                 distinct_on: Optional[List[str]] = None) -&gt; None:
        self.kind = kind
        self.query_filter = query_filter
        self.orders = order or []
        self.start_cursor = start_cursor
        self.end_cursor = end_cursor
        self.offset = offset
        self.limit = limit
        self.projection = projection or []
        self.distinct_on = distinct_on or []

    def __eq__(self, other: Any) -&gt; bool:
        if not isinstance(other, Query):
            return False

        return bool(
            self.kind == other.kind
            and self.query_filter == other.query_filter)

    @classmethod
    def from_repr(cls, data: Dict[str, Any]) -&gt; &#39;Query&#39;:
        kind = data[&#39;kind&#39;] or &#39;&#39;  # Kind is required
        if not isinstance(kind, str):
            # If &#39;kind&#39; is not a str, then the only other acceptable format
            # is the list of a single dict [{&#39;name&#39; : kind}] (see to_repr)
            kind = kind[0].get(&#39;name&#39;) or &#39;&#39;
        orders = [PropertyOrder.from_repr(o) for o in data.get(&#39;order&#39;, [])]
        start_cursor = data.get(&#39;startCursor&#39;) or &#39;&#39;
        end_cursor = data.get(&#39;endCursor&#39;) or &#39;&#39;
        offset = int(data[&#39;offset&#39;]) if &#39;offset&#39; in data else None
        limit = int(data[&#39;limit&#39;]) if &#39;limit&#39; in data else None
        projection = [Projection.from_repr(p)
                      for p in data.get(&#39;projection&#39;, [])]
        distinct_on = [d[&#39;name&#39;] for d in data.get(&#39;distinct_on&#39;, [])]

        filter_ = data.get(&#39;filter&#39;)
        query_filter = Filter.from_repr(filter_) if filter_ else None

        return cls(kind=kind, query_filter=query_filter, order=orders,
                   start_cursor=start_cursor, end_cursor=end_cursor,
                   offset=offset, limit=limit,
                   projection=projection, distinct_on=distinct_on)

    def to_repr(self) -&gt; Dict[str, Any]:
        data: Dict[str, Any] = {
            &#39;kind&#39;: [{&#39;name&#39;: self.kind}] if self.kind else [],
        }
        if self.query_filter:
            data[&#39;filter&#39;] = self.query_filter.to_repr()
        if self.orders:
            data[&#39;order&#39;] = [o.to_repr() for o in self.orders]
        if self.start_cursor:
            data[&#39;startCursor&#39;] = self.start_cursor
        if self.end_cursor:
            data[&#39;endCursor&#39;] = self.end_cursor
        if self.offset is not None:
            data[&#39;offset&#39;] = self.offset
        if self.limit is not None:
            data[&#39;limit&#39;] = self.limit
        if self.projection:
            data[&#39;projection&#39;] = [p.to_repr() for p in self.projection]
        if self.distinct_on:
            data[&#39;distinctOn&#39;] = [{&#39;name&#39;: d} for d in self.distinct_on]
        return data</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="gcloud.aio.datastore.query.BaseQuery" href="#gcloud.aio.datastore.query.BaseQuery">BaseQuery</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="gcloud.aio.datastore.query.Query.json_key"><code class="name">var <span class="ident">json_key</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Static methods</h3>
<dl>
<dt id="gcloud.aio.datastore.query.Query.from_repr"><code class="name flex">
<span>def <span class="ident">from_repr</span></span>(<span>data: Dict[str, Any]) ‑> <a title="gcloud.aio.datastore.query.Query" href="#gcloud.aio.datastore.query.Query">Query</a></span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@classmethod
def from_repr(cls, data: Dict[str, Any]) -&gt; &#39;Query&#39;:
    kind = data[&#39;kind&#39;] or &#39;&#39;  # Kind is required
    if not isinstance(kind, str):
        # If &#39;kind&#39; is not a str, then the only other acceptable format
        # is the list of a single dict [{&#39;name&#39; : kind}] (see to_repr)
        kind = kind[0].get(&#39;name&#39;) or &#39;&#39;
    orders = [PropertyOrder.from_repr(o) for o in data.get(&#39;order&#39;, [])]
    start_cursor = data.get(&#39;startCursor&#39;) or &#39;&#39;
    end_cursor = data.get(&#39;endCursor&#39;) or &#39;&#39;
    offset = int(data[&#39;offset&#39;]) if &#39;offset&#39; in data else None
    limit = int(data[&#39;limit&#39;]) if &#39;limit&#39; in data else None
    projection = [Projection.from_repr(p)
                  for p in data.get(&#39;projection&#39;, [])]
    distinct_on = [d[&#39;name&#39;] for d in data.get(&#39;distinct_on&#39;, [])]

    filter_ = data.get(&#39;filter&#39;)
    query_filter = Filter.from_repr(filter_) if filter_ else None

    return cls(kind=kind, query_filter=query_filter, order=orders,
               start_cursor=start_cursor, end_cursor=end_cursor,
               offset=offset, limit=limit,
               projection=projection, distinct_on=distinct_on)</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="gcloud.aio.datastore.query.Query.to_repr"><code class="name flex">
<span>def <span class="ident">to_repr</span></span>(<span>self) ‑> Dict[str, Any]</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def to_repr(self) -&gt; Dict[str, Any]:
    data: Dict[str, Any] = {
        &#39;kind&#39;: [{&#39;name&#39;: self.kind}] if self.kind else [],
    }
    if self.query_filter:
        data[&#39;filter&#39;] = self.query_filter.to_repr()
    if self.orders:
        data[&#39;order&#39;] = [o.to_repr() for o in self.orders]
    if self.start_cursor:
        data[&#39;startCursor&#39;] = self.start_cursor
    if self.end_cursor:
        data[&#39;endCursor&#39;] = self.end_cursor
    if self.offset is not None:
        data[&#39;offset&#39;] = self.offset
    if self.limit is not None:
        data[&#39;limit&#39;] = self.limit
    if self.projection:
        data[&#39;projection&#39;] = [p.to_repr() for p in self.projection]
    if self.distinct_on:
        data[&#39;distinctOn&#39;] = [{&#39;name&#39;: d} for d in self.distinct_on]
    return data</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="gcloud.aio.datastore.query.QueryResultBatch"><code class="flex name class">
<span>class <span class="ident">QueryResultBatch</span></span>
<span>(</span><span>end_cursor: str, entity_result_type: <a title="gcloud.aio.datastore.constants.ResultType" href="constants.html#gcloud.aio.datastore.constants.ResultType">ResultType</a> = ResultType.UNSPECIFIED, entity_results: Optional[List[<a title="gcloud.aio.datastore.entity.EntityResult" href="entity.html#gcloud.aio.datastore.entity.EntityResult">EntityResult</a>]] = None, more_results: <a title="gcloud.aio.datastore.constants.MoreResultsType" href="constants.html#gcloud.aio.datastore.constants.MoreResultsType">MoreResultsType</a> = MoreResultsType.UNSPECIFIED, skipped_cursor: str = '', skipped_results: int = 0, snapshot_version: str = '')</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class QueryResultBatch:
    entity_result_kind = EntityResult

    def __init__(self, end_cursor: str,
                 entity_result_type: ResultType = ResultType.UNSPECIFIED,
                 entity_results: Optional[List[EntityResult]] = None,
                 more_results: MoreResultsType = MoreResultsType.UNSPECIFIED,
                 skipped_cursor: str = &#39;&#39;, skipped_results: int = 0,
                 snapshot_version: str = &#39;&#39;) -&gt; None:
        self.end_cursor = end_cursor

        self.entity_result_type = entity_result_type
        self.entity_results = entity_results or []
        self.more_results = more_results
        self.skipped_cursor = skipped_cursor
        self.skipped_results = skipped_results
        self.snapshot_version = snapshot_version

    def __eq__(self, other: Any) -&gt; bool:
        if not isinstance(other, QueryResultBatch):
            return False

        return bool(self.end_cursor == other.end_cursor
                    and self.entity_result_type == other.entity_result_type
                    and self.entity_results == other.entity_results
                    and self.more_results == other.more_results
                    and self.skipped_cursor == other.skipped_cursor
                    and self.skipped_results == other.skipped_results
                    and self.snapshot_version == other.snapshot_version)

    def __repr__(self) -&gt; str:
        return str(self.to_repr())

    @classmethod
    def from_repr(cls, data: Dict[str, Any]) -&gt; &#39;QueryResultBatch&#39;:
        end_cursor = data[&#39;endCursor&#39;]
        entity_result_type = ResultType(data[&#39;entityResultType&#39;])
        entity_results = [cls.entity_result_kind.from_repr(er)
                          for er in data.get(&#39;entityResults&#39;, [])]
        more_results = MoreResultsType(data[&#39;moreResults&#39;])
        skipped_cursor = data.get(&#39;skippedCursor&#39;, &#39;&#39;)
        skipped_results = data.get(&#39;skippedResults&#39;, 0)
        snapshot_version = data.get(&#39;snapshotVersion&#39;, &#39;&#39;)
        return cls(end_cursor, entity_result_type=entity_result_type,
                   entity_results=entity_results, more_results=more_results,
                   skipped_cursor=skipped_cursor,
                   skipped_results=skipped_results,
                   snapshot_version=snapshot_version)

    def to_repr(self) -&gt; Dict[str, Any]:
        data = {
            &#39;endCursor&#39;: self.end_cursor,
            &#39;entityResults&#39;: [er.to_repr() for er in self.entity_results],
            &#39;entityResultType&#39;: self.entity_result_type.value,
            &#39;moreResults&#39;: self.more_results.value,
            &#39;skippedResults&#39;: self.skipped_results,
        }
        if self.skipped_cursor:
            data[&#39;skippedCursor&#39;] = self.skipped_cursor
        if self.snapshot_version:
            data[&#39;snapshotVersion&#39;] = self.snapshot_version

        return data</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="gcloud.aio.datastore.query.QueryResultBatch.entity_result_kind"><code class="name">var <span class="ident">entity_result_kind</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Static methods</h3>
<dl>
<dt id="gcloud.aio.datastore.query.QueryResultBatch.from_repr"><code class="name flex">
<span>def <span class="ident">from_repr</span></span>(<span>data: Dict[str, Any]) ‑> <a title="gcloud.aio.datastore.query.QueryResultBatch" href="#gcloud.aio.datastore.query.QueryResultBatch">QueryResultBatch</a></span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@classmethod
def from_repr(cls, data: Dict[str, Any]) -&gt; &#39;QueryResultBatch&#39;:
    end_cursor = data[&#39;endCursor&#39;]
    entity_result_type = ResultType(data[&#39;entityResultType&#39;])
    entity_results = [cls.entity_result_kind.from_repr(er)
                      for er in data.get(&#39;entityResults&#39;, [])]
    more_results = MoreResultsType(data[&#39;moreResults&#39;])
    skipped_cursor = data.get(&#39;skippedCursor&#39;, &#39;&#39;)
    skipped_results = data.get(&#39;skippedResults&#39;, 0)
    snapshot_version = data.get(&#39;snapshotVersion&#39;, &#39;&#39;)
    return cls(end_cursor, entity_result_type=entity_result_type,
               entity_results=entity_results, more_results=more_results,
               skipped_cursor=skipped_cursor,
               skipped_results=skipped_results,
               snapshot_version=snapshot_version)</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="gcloud.aio.datastore.query.QueryResultBatch.to_repr"><code class="name flex">
<span>def <span class="ident">to_repr</span></span>(<span>self) ‑> Dict[str, Any]</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def to_repr(self) -&gt; Dict[str, Any]:
    data = {
        &#39;endCursor&#39;: self.end_cursor,
        &#39;entityResults&#39;: [er.to_repr() for er in self.entity_results],
        &#39;entityResultType&#39;: self.entity_result_type.value,
        &#39;moreResults&#39;: self.more_results.value,
        &#39;skippedResults&#39;: self.skipped_results,
    }
    if self.skipped_cursor:
        data[&#39;skippedCursor&#39;] = self.skipped_cursor
    if self.snapshot_version:
        data[&#39;snapshotVersion&#39;] = self.snapshot_version

    return data</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="gcloud.aio.datastore" href="index.html">gcloud.aio.datastore</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="gcloud.aio.datastore.query.BaseQuery" href="#gcloud.aio.datastore.query.BaseQuery">BaseQuery</a></code></h4>
<ul class="">
<li><code><a title="gcloud.aio.datastore.query.BaseQuery.from_repr" href="#gcloud.aio.datastore.query.BaseQuery.from_repr">from_repr</a></code></li>
<li><code><a title="gcloud.aio.datastore.query.BaseQuery.json_key" href="#gcloud.aio.datastore.query.BaseQuery.json_key">json_key</a></code></li>
<li><code><a title="gcloud.aio.datastore.query.BaseQuery.to_repr" href="#gcloud.aio.datastore.query.BaseQuery.to_repr">to_repr</a></code></li>
<li><code><a title="gcloud.aio.datastore.query.BaseQuery.value_kind" href="#gcloud.aio.datastore.query.BaseQuery.value_kind">value_kind</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="gcloud.aio.datastore.query.GQLCursor" href="#gcloud.aio.datastore.query.GQLCursor">GQLCursor</a></code></h4>
</li>
<li>
<h4><code><a title="gcloud.aio.datastore.query.GQLQuery" href="#gcloud.aio.datastore.query.GQLQuery">GQLQuery</a></code></h4>
<ul class="">
<li><code><a title="gcloud.aio.datastore.query.GQLQuery.from_repr" href="#gcloud.aio.datastore.query.GQLQuery.from_repr">from_repr</a></code></li>
<li><code><a title="gcloud.aio.datastore.query.GQLQuery.json_key" href="#gcloud.aio.datastore.query.GQLQuery.json_key">json_key</a></code></li>
<li><code><a title="gcloud.aio.datastore.query.GQLQuery.to_repr" href="#gcloud.aio.datastore.query.GQLQuery.to_repr">to_repr</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="gcloud.aio.datastore.query.Query" href="#gcloud.aio.datastore.query.Query">Query</a></code></h4>
<ul class="">
<li><code><a title="gcloud.aio.datastore.query.Query.from_repr" href="#gcloud.aio.datastore.query.Query.from_repr">from_repr</a></code></li>
<li><code><a title="gcloud.aio.datastore.query.Query.json_key" href="#gcloud.aio.datastore.query.Query.json_key">json_key</a></code></li>
<li><code><a title="gcloud.aio.datastore.query.Query.to_repr" href="#gcloud.aio.datastore.query.Query.to_repr">to_repr</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="gcloud.aio.datastore.query.QueryResultBatch" href="#gcloud.aio.datastore.query.QueryResultBatch">QueryResultBatch</a></code></h4>
<ul class="">
<li><code><a title="gcloud.aio.datastore.query.QueryResultBatch.entity_result_kind" href="#gcloud.aio.datastore.query.QueryResultBatch.entity_result_kind">entity_result_kind</a></code></li>
<li><code><a title="gcloud.aio.datastore.query.QueryResultBatch.from_repr" href="#gcloud.aio.datastore.query.QueryResultBatch.from_repr">from_repr</a></code></li>
<li><code><a title="gcloud.aio.datastore.query.QueryResultBatch.to_repr" href="#gcloud.aio.datastore.query.QueryResultBatch.to_repr">to_repr</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>